<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swagger UI</title>
    <!-- Include Swagger UI CSS from CDN -->
</head>

<body>
    <div id="swagger-ui"></div>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/4.15.5/swagger-ui-standalone-preset.min.js"></script>

    <script>
        AQ__INTERVAL_TIMEOUT = 300;
        SwaggerUIBundle({
            url: "https://raw.githubusercontent.com/ajoe-alex/demo.github.io/refs/heads/main/Resource_management_swagger.json",
            dom_id: '#swagger-ui',
            presets: [
                SwaggerUIBundle.presets.apis,
                SwaggerUIStandalonePreset
            ],
            layout: "BaseLayout"  // Clean layout for embedding
        });

        function waitForElement(selector, root) {
            root = root || document;
            return new Promise((resolve) => {
                const checkExist = setInterval(() => {
                    const elements = Array.from(root.querySelectorAll(selector));
                    if (elements && elements.length > 0) {
                        clearInterval(checkExist);
                        // Stop checking once the element is found
                        resolve(elements);
                        // Resolve promise with the found element
                    }
                }
                    , 100);
                // Check every 100ms
            });
        }

        waitForElement('#swagger-ui').then((elems_) => {
            swagger_ui_ = elems_[0];
            waitForElement('.title', swagger_ui_).then((elems_) => {
                const allWrapper = [...swagger_ui_.querySelectorAll('.wrapper')];
                allWrapper.forEach(elem => {
                    elem.classList.remove('wrapper');
                    // Remove 'wrapper' class
                });
                console.log('Wrapper class removed from all elements within #swagger-ui');
            })

            waitForElement('small', swagger_ui_).then((elems_) => {
                elems_.forEach(version => {
                    version.remove()
                })
            })

            window.setInterval(() => {
                let allExecuteButtons = Array.from(swagger_ui_.querySelectorAll('button.btn.execute.opblock-control__btn'))
                let filteredExecuteButtons = allExecuteButtons.filter(executeButton => !executeButton.classList.contains('aq__tag'))
                filteredExecuteButtons.forEach(executeButton => {
                    executeButton.classList.add('aq__tag')
                    executeButton.innerText = 'Get Curl'
                })
            }, AQ__INTERVAL_TIMEOUT)

            window.setInterval(() => {
                let allRequestURLs = Array.from(swagger_ui_.querySelectorAll('.request-url'))
                allRequestURLs.forEach(requestUrl => {
                    requestUrl.remove()
                })
            }, AQ__INTERVAL_TIMEOUT)

            window.setInterval(() => {
                let allRequestBodies = Array.from(swagger_ui_.querySelectorAll('.responses-table.live-responses-table'))
                allRequestBodies.forEach(requestBody => {
                    requestBody.remove()
                })
            }, AQ__INTERVAL_TIMEOUT)

            window.setInterval(() => {
                let elems = Array.from(swagger_ui_.querySelectorAll('h4'))
                elems.forEach(elem => {
                    elem.remove()
                })
            }, AQ__INTERVAL_TIMEOUT)
        });



    </script>
</body>

</html>